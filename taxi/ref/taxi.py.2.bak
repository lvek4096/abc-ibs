#import statements
import mysql.connector as ms
import random as rd
import platform as pf
import tkinter as tk

#definitions
id=rd.randint(10000,99999)	#random number for ID
locations='ABCDEFGHIJKLMNOPQRSTUVWXYZ'	#defines locations
#ctype=['Standard','Premium','Express']	#defines coach type
build='20'	#Program build

#mysql connection
con=ms.connect(host='localhost',user='john',password='123456',database='taxi')
cur=con.cursor()
print('Connected to database.')

#GUI
window=tk.Tk()
#fonts for GUI
fnt=('IBM Plex Mono',12)
fntit=('IBM Plex Mono',12,'italic')
h1fnt=('IBM Plex Sans',24)
#Main Window parameters
window.title('Taxi Booking')
#window.geometry('640x480')

def submit():	#Backend - takes inputs, sends to MySQL db
	#Converts inputs to variables
	start_inp=start.get()
	end_inp=end.get()
	date_inp=date.get()
	time_inp=time.get()

	l1=[id,start_inp,end_inp,date_inp,time_inp]

	#Sends to MySQL db
	sql='insert into bookings values (%s,%s,%s,%s,%s)'
	val=(id,start_inp,end_inp,date_inp,time_inp)
	cur.execute(sql,val)
	con.commit()

	#data=[];data.append(l1)
	#df=pd.DataFrame(data,columns=['ID','From','To','Date','Time'])
	
	#Shows confirmation on GUI Screen
	tk.Label(text=('Booking\n'+str(l1)+'\nentered successfully'),font=fnt).grid(column=1,row=9)

def about():	#About the program
	about=tk.Tk()
	#about.geometry('160x120')
	abttitle='About this '+pf.system()+' system'		#title of About window
	about.title(abttitle)

	#Labels
	tk.Label(about,text='About',font=h1fnt).grid(column=1,row=0)
	tk.Label(about,text=('Build '+build),font=fnt).grid(column=1,row=1)
	tk.Label(about,text='This is pre-release software.\nBugs may exist and features may not be complete.\nUse at your own risk.',font=fnt).grid(column=1,row=2)
	tk.Label(about,text='-------------------------------',font=fnt).grid(column=1,row=3)
	tk.Label(about,text=('Python',pf.python_version()),font=fnt).grid(column=1,row=4)
	tk.Label(about,text=('Tkinter',tk.TkVersion),font=fnt).grid(column=1,row=5)
	tk.Label(about,text=('MySQL',ms.__version__),font=fnt).grid(column=1,row=6)
	tk.Label(about,text='-------------------------------',font=fnt).grid(column=1,row=7)
	
	#System info
	if pf.system()=='Windows':		#Additional info - Windows systems ONLY
		tk.Label(about,text=(pf.system(),pf.version(),pf.release()),font=fnt).grid(column=1,row=8)
	else:
		tk.Label(about,text=(pf.system(),pf.release()),font=fnt).grid(column=1,row=8)
	
	#Additional Linux distribution info - Linux ONLY
	if pf.system()=='Linux':
		linux=pf.freedesktop_os_release()
		tk.Label(about,text=(linux['NAME']+' '+linux['VERSION']),font=fnt).grid(column=1,row=9)
	
	tk.Label(about,text='-------------------------------',font=fnt).grid(column=1,row=10)
	
	#CPU type - i386 (32-bit); AMD64/x86_64 (64-bit) etc.
	tk.Label(about,text=(pf.machine()+' system'),font=fnt).grid(column=1,row=11)
	
	#Closes the window
	tk.Button(about,font=fnt,text='Close',command=about.destroy).grid(column=1,row=12)
	about.mainloop()

#Window
tk.Label(text='ABC TEKSI',font=h1fnt).grid(column=1,row=0)

#Input fields
tk.Label(text='ID',font=fnt).grid(column=0,row=3)
bkgid=tk.Label(text=id,font=fnt);bkgid.grid(column=1,row=3)

tk.Label(text='From',font=fnt).grid(column=0,row=4)
start=tk.Entry(window,font=fnt);start.grid(column=1,row=4)

tk.Label(text='To',font=fnt).grid(column=0,row=5)
end=tk.Entry(window,font=fnt);end.grid(column=1,row=5)

tk.Label(text='Date',font=fnt).grid(column=0,row=6)
date=tk.Entry(window,font=fnt);date.grid(column=1,row=6)

tk.Label(text='Time',font=fnt).grid(column=0,row=7)
time=tk.Entry(window,font=fnt);time.grid(column=1,row=7)


#buttons
btn=tk.Button(window,font=fnt,text='Submit',command=submit);btn.grid(column=1,row=8)
btn2=tk.Button(window,font=fnt,text='About this program...',command=about);btn2.grid(column=2,row=11)

#Version on system
tk.Label(text=('Build '+build+' on\n'+pf.system()+' '+pf.release()),font=fntit).grid(column=0,row=12)
window.mainloop()